{"title":"Compressing without mod_deflate","link":"https://www.adamkoch.com/2012/03/07/compressing-without-mod_deflate/","pubDate":"Thu, 08 Mar 2012 05:37:36 +0000","dc:creator":"admin","guid":[{"_":"http://www.adamkoch.com/?p=1857","$":{"isPermaLink":"false"}}],"description":[""],"content:encoded":"So, what do you do when you hosting company won't allow you to use Apache's mod_deflate?\n\nI wanted to use PHP's \"auto_prepend_file\" and php_value directive in .htaccess to automatically prepend a file, but my server evidently doesn't support \"php_value\" directives.\n\nmethod I found <a href=\"http://viralpatel.net/blogs/2009/02/compress-php-css-js-javascript-optimize-website-performance.html\">here</a> which ________\n\nHere's what I came up with.\n\nThe first step was to tell the PHP engine to compress all PHP files.\n\nphp.ini:\nzlib.output_compression=on\n# let the server decide which level to use\nzlib.output_compression_level=-1\n\n<a href=\"http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file\">auto_prepend_file</a>=\n\nNow, I had to make my static files PHP files. That was fine, but then it was returning the Content-Type as \"\".\n\nstyles.css.php:\n&lt;?php\nheader (\"Content-Type: text/css\");\n?&gt;\n\ncombined.js.php:\n&lt;?php\nheader (\"Content-Type: application/x-javascript\");\n?&gt;\n\n.htaccess:\n# Check to see if the browser accepts gzipped files\nRewriteCond %{HTTP:ACCEPT-ENCODING} ^.*gzip.*$\n# Now, see if that file appended with \".php\" exists.\nRewriteCond %{REQUEST_FILENAME}.php -f\n# If so, point to that file. (Don't allow files that start with \".\".)\nRewriteRule  ^([^.]+.+)  /home/path/public_html/$1.php  [L]","excerpt:encoded":"","wp:post_id":"1857","wp:post_date":"2012-03-07 23:37:36","wp:post_date_gmt":"2012-03-08 05:37:36","wp:post_modified":["2012-03-07 23:37:36"],"wp:post_modified_gmt":["2012-03-08 05:37:36"],"wp:comment_status":["open"],"wp:ping_status":["open"],"wp:post_name":"compressing-without-mod_deflate","wp:status":"publish","wp:post_parent":["0"],"wp:menu_order":["0"],"wp:post_type":"post","wp:post_password":[""],"wp:is_sticky":["0"],"category":[{"_":"apache","$":{"domain":"post_tag","nicename":"apache"}},{"_":"compression","$":{"domain":"post_tag","nicename":"compression"}},{"_":"css","$":{"domain":"post_tag","nicename":"css"}},{"_":"html","$":{"domain":"post_tag","nicename":"html"}},{"_":"Professional","$":{"domain":"category","nicename":"professional"}}],"wp:postmeta":[{"wp:meta_key":["aktt_notify_twitter"],"wp:meta_value":["no"]},{"wp:meta_key":["_edit_last"],"wp:meta_value":["1"]},{"wp:meta_key":["_jetpack_related_posts_cache"],"wp:meta_value":["a:1:{s:32:\"37550b67d263a3ce789993dc25046c5f\";a:2:{s:7:\"expires\";i:1627492937;s:7:\"payload\";a:6:{i:0;a:1:{s:2:\"id\";i:1730;}i:1;a:1:{s:2:\"id\";i:1688;}i:2;a:1:{s:2:\"id\";i:1220;}i:3;a:1:{s:2:\"id\";i:1311;}i:4;a:1:{s:2:\"id\";i:2785;}i:5;a:1:{s:2:\"id\";i:1508;}}}}"]}],"tidyCategory":"Professional","tidyTags":["apache","compression","css","html"]}

